# v0.1.3 发布前验证清单

## 代码修改验证
- [x] backend/run.py - 添加环境变量控制 reload
- [x] start.sh - 改进路径处理和配置初始化
- [x] backend/.env.example - 修正配置示例
- [x] scripts/build-release.sh - 创建打包脚本

## 打包验证
- [x] 发布包大小合理（17M）
- [x] 不包含 .env 文件
- [x] 包含 .env.example 文件
- [x] 不包含开发目录（venv, node_modules, .git）
- [x] 不包含临时文件（.playwright-mcp, .figma）
- [x] SHA256 校验和已生成

## 功能验证
- [x] 在干净环境解压成功
- [x] 虚拟环境自动创建
- [x] 依赖自动安装
- [x] .env 文件自动创建
- [x] 服务启动成功（生产模式）
- [x] ENV=production 环境变量正确设置

## 文档验证
- [x] 发布说明已创建（docs/release-notes/v0.1.3.md）
- [x] 测试指南已创建（docs/guides/release-testing.md）
- [x] 修复总结已创建（docs/technical/v0.1.3-release-fix-summary.md）
- [x] SHA256 校验和已添加到发布说明

## 待完成任务
- [ ] 在其他 Mac 环境测试（Intel Mac, 不同 macOS 版本）
- [ ] 提交代码到 git
- [ ] 创建 git tag v0.1.3
- [ ] 推送到远程仓库
- [ ] 创建 GitHub Release
- [ ] 通知用户更新

## 提交命令
```bash
# 添加所有修改
git add backend/run.py backend/.env.example start.sh
git add scripts/build-release.sh
git add docs/release-notes/v0.1.3.md
git add docs/guides/release-testing.md
git add docs/technical/v0.1.3-release-fix-summary.md
git add docs/releases/claude-manager-v0.1.3-macos-arm64.tar.gz

# 提交
git commit -m "Release v0.1.3: 修复发布包在其他 Mac 环境运行失败的问题

主要修复:
- 添加环境变量控制 uvicorn reload 模式，生产环境禁用 reload
- 改进 start.sh 脚本，添加路径处理和配置初始化
- 修正 .env.example 配置示例
- 创建规范的打包脚本 scripts/build-release.sh
- 优化发布包大小（从 51M 降到 17M）

Co-Authored-By: Claude Opus 4.6 (1M context) <noreply@anthropic.com>"

# 创建标签
git tag -a v0.1.3 -m "Release v0.1.3"

# 推送
git push origin main --tags
```

## 测试命令
```bash
# 在其他 Mac 上测试
cd /tmp
tar -xzf claude-manager-v0.1.3-macos-arm64.tar.gz
cd claude-manager-v0.1.3-macos-arm64
./start.sh

# 验证服务
curl http://localhost:8000/health
open http://localhost:8000/docs
```
