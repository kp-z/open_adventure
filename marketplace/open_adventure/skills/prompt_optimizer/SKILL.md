---
name: prompt_optimizer
description: 优化用户输入的 prompt，使其更清晰、具体、结构化，让 AI 能够更好地理解和执行任务。当用户的需求模糊、缺乏上下文或需要任务分解时使用。
---

# Prompt 优化技能

## 核心功能
1. **结构化优化** - 将模糊的需求转换为清晰的结构化指令
2. **上下文补充** - 自动添加必要的上下文信息
3. **明确性增强** - 消除歧义，明确期望的输出格式
4. **任务分解** - 将复杂任务分解为可执行的步骤
5. **约束条件添加** - 补充必要的限制和要求

## 优化原则
- 保持用户原意，不改变核心需求
- 添加具体的输出格式要求
- 明确任务的范围和边界
- 提供必要的示例或参考
- 使用清晰的语言和结构

## 优化流程

当接收到用户的原始 prompt 时，按照以下步骤进行优化：

### 1. 分析原始需求
- 识别核心目标
- 找出模糊或不明确的部分
- 确定缺失的上下文信息

### 2. 结构化重组
将优化后的 prompt 组织为以下结构：

**任务目标**：[明确的目标描述]

**具体要求**：
- [详细要求 1]
- [详细要求 2]
- [详细要求 3]

**输出格式**：[期望的输出格式]

**约束条件**：
- [限制条件 1]
- [注意事项 2]

**示例参考**（如果需要）：
[提供相关示例]

### 3. 确认与反馈
- 向用户展示优化后的 prompt
- 询问是否需要进一步调整
- 确认后再执行任务

## 应用场景
- 代码生成请求
- 文档编写需求
- 数据分析任务
- 问题解答
- 创意生成
- 系统设计
- 功能实现

## 示例

### 示例 1：模糊的代码请求

**原始 prompt**：
```
帮我写个登录功能
```

**优化后 prompt**：
```
任务目标：实现用户登录功能

具体要求：
- 支持用户名/邮箱 + 密码登录
- 实现密码加密存储（使用 bcrypt）
- 添加登录失败次数限制（5次后锁定账户30分钟）
- 登录成功后生成 JWT token
- 实现"记住我"功能（可选）

输出格式：
- 后端 API 接口代码
- 前端登录表单组件
- 数据库 schema 定义

约束条件：
- 使用项目现有的技术栈（Python + FastAPI + React）
- 遵循项目的代码规范
- 添加必要的错误处理和日志记录
- 包含基本的单元测试
```

### 示例 2：不明确的文档需求

**原始 prompt**：
```
写个 API 文档
```

**优化后 prompt**：
```
任务目标：为用户管理模块编写 API 文档

具体要求：
- 包含所有用户相关的 API 端点（CRUD 操作）
- 每个端点需要说明：
  - HTTP 方法和路径
  - 请求参数（路径参数、查询参数、请求体）
  - 响应格式（成功和失败情况）
  - 认证要求
  - 错误码说明
- 提供实际的请求/响应示例

输出格式：
- Markdown 格式
- 使用表格展示参数
- 代码块展示 JSON 示例

约束条件：
- 基于现有的 backend/app/api/routers/users.py 代码
- 遵循 OpenAPI 3.0 规范
- 文档字数控制在 2000-3000 字
```

## 注意事项
- 不要过度优化，保持原始需求的核心意图
- 如果原始 prompt 已经很清晰，只需做轻微调整
- 对于技术性任务，确保技术栈和工具选择合理
- 优化后的 prompt 应该是可执行的，而不是抽象的描述
